<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>Using Python to Control Katello - Journal of an Open Sourcee</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://omaciel.github.io/using-python-to-control-katello.html">

        <meta name="author" content="Og Maciel" />
        <meta name="keywords" content="katello,english,python" />
        <meta name="description" content="I usually like to use python to script my day to day tests against Katello (you may have seen some of my previous posts about using the Katello CLI for the same purpose) and I figured I’d start showing some basic examples for anyone else out there who may ..." />

        <meta property="og:site_name" content="Journal of an Open Sourcee" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Using Python to Control Katello"/>
        <meta property="og:url" content="https://omaciel.github.io/using-python-to-control-katello.html"/>
        <meta property="og:description" content="I usually like to use python to script my day to day tests against Katello (you may have seen some of my previous posts about using the Katello CLI for the same purpose) and I figured I’d start showing some basic examples for anyone else out there who may ..."/>
        <meta property="article:published_time" content="2013-09-13" />
            <meta property="article:section" content="English" />
            <meta property="article:tag" content="katello" />
            <meta property="article:tag" content="english" />
            <meta property="article:tag" content="python" />
            <meta property="article:author" content="Og Maciel" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://omaciel.github.io/theme/css/bootstrap.united.min.css" type="text/css"/>
    <link href="https://omaciel.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://omaciel.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://omaciel.github.io/theme/css/style.css" type="text/css"/>
        <link href="https://omaciel.github.io/static/custom.css" rel="stylesheet">

        <link href="https://omaciel.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Journal of an Open Sourcee ATOM Feed"/>
        <link href="https://omaciel.github.io/feeds.rss" type="application/rss+xml" rel="alternate"
              title="Journal of an Open Sourcee RSS Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://omaciel.github.io/" class="navbar-brand">
Journal of an Open Sourcee            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="https://omaciel.github.io/category/english.html">English</a>
                        </li>
                        <li >
                            <a href="https://omaciel.github.io/category/portuguese.html">Portuguese</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://omaciel.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://omaciel.github.io/using-python-to-control-katello.html"
                       rel="bookmark"
                       title="Permalink to Using Python to Control Katello">
                        Using Python to Control Katello
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2013-09-13T00:36:00-04:00"> Fri 13 September 2013</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="https://omaciel.github.io/tag/katello.html">katello</a>
        /
	<a href="https://omaciel.github.io/tag/english.html">english</a>
        /
	<a href="https://omaciel.github.io/tag/python.html">python</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><img alt="Emacs editor with python code" src="http://bit.ly/14Q0fhi" /></p>
<p>I usually like to use python to script my day to day tests against
<a class="reference external" href="http://www.katello.org/">Katello</a> (you may have seen some of my
<a class="reference external" href="http://ogmaciel.tumblr.com/post/52170839167/populating-a-katello-instance-using-the-cli">previous</a>
<a class="reference external" href="http://ogmaciel.tumblr.com/post/29571582261/script-to-populate-a-katello-instance-with-valid-data">posts</a>
about using the Katello CLI for the same purpose) and I figured I’d
start showing some basic examples for anyone else out there who may be
interested.</p>
<p>Assuming you have already installed and configured your Katello instance
(learn how to do this
<a class="reference external" href="https://fedorahosted.org/katello/wiki/Install">here</a>) with the
default configurations, we now have a few options to proceed:</p>
<ol class="arabic simple">
<li>write and run your scripts in the same environment as your server</li>
<li>install the
<a class="reference external" href="https://pypi.python.org/pypi/katello-cli/">katello-cli</a> package
(<em>pip install katello-cli</em>)</li>
<li>Use git to clone the katello-cli
<a class="reference external" href="https://github.com/Katello/katello-cli">repository</a> (<em>git
clone&nbsp;https://github.com/Katello/katello-cli.git</em>) and make sure to
include it into your <strong>PYTHONPATH</strong>.</li>
</ol>
<p><strong>Option 1</strong> is by far the easiest approach since you should have all
the dependencies (namely <strong>kerberos</strong> and <strong>M2Crypto</strong>) already
installed, but I like <strong>Option 3</strong> as it allows me to always have the
latest code to play with.</p>
<p>Now we’re ready to write some code! The first thing we’ll do is import
some of the Katello modules:</p>
<blockquote>
from katello.client import server
from katello.client.server import BasicAuthentication
from katello.client.api.organization import OrganizationAPI
from katello.client.api.system_group import SystemGroupAPI</blockquote>
<p>Next, we establish a connection to the Katello server
(<strong>qetello01.example.com</strong> in my case), using the default credentials of
<strong>admin</strong>/<strong>admin</strong>:</p>
<blockquote>
katello_server = server.KatelloServer(host='qetello01.example.com',
path_prefix='/katello/', port=443)
katello_server.set_auth_method(BasicAuthentication(username='admin',
password='admin'))
server.set_active_server(katello_server)</blockquote>
<p>Let’s now instantiate the Organization API object and use it to fetch
the “<strong>ACME_Corporation</strong>&quot; that gets automatically created for a
default installation:</p>
<blockquote>
<p>organization_api = OrganizationAPI()</p>
<p>org = organization_api.organization('ACME_Corporation')
print&nbsp;org
{u’apply_info_task_id’: None,
u’created_at’: u’2013-09-12T20:15:06Z’,
u’default_info’: {u’distributor’: [], u’system’: []},
u’deletion_task_id’: None,
u’description’: u’ACME_Corporation Organization’,
u’id’: 1,
u’label’: u’ACME_Corporation’,
u’name’: u’ACME_Corporation’,
u’owner_auto_attach_all_systems_task_id’: None,
u’service_level’: None,
u’service_levels’: [],
u’updated_at’: u’2013-09-12T20:15:06Z’}</p>
</blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Lastly, let’s create a brand new organization:</p>
<blockquote>
new_org = organization_api.create(name='New Org', label='new-org',
description='Created via API')
print new_org
{u’apply_info_task_id’: None,
u’created_at’: u’2013-09-12T21:48:55Z’,
u’default_info’: {u’distributor’: [], u’system’: []},
u’deletion_task_id’: None,
u’description’: u’Created via API’,
u’id’: 283,
u’label’: u’new-org’,
u’name’: u’New Org’,
u’owner_auto_attach_all_systems_task_id’: None,
u’service_level’: None,
u’service_levels’: [],
u’updated_at’: u’2013-09-12T21:48:55Z’}</blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>As you can see, it is pretty straight forward to use python to create
some useful scripts to drive a Katello server, whether you want to
populate it with a pre-defined set of data (e.g. default users, roles,
permissions, organizations, content, etc) or to test core functionality
as I do with <a class="reference external" href="https://github.com/omaciel/mangonel">Mangonel</a>, my pet
project.</p>
<p>Here’s a
<a class="reference external" href="https://gist.github.com/anonymous/71c0527841d30b80424b">Gist</a> of the
code mentioned in this post, and let me know if this was useful to you.</p>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'journalofanopensourcee'; // required: replace example with your forum shortname

                    var disqus_identifier = 'using-python-to-control-katello';
                var disqus_url = 'https://omaciel.github.io/using-python-to-control-katello.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/omaciel"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
                <li class="list-group-item"><a href="https://twitter.com/OgMaciel"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
                <li class="list-group-item"><a href="http://www.linkedin.com/pub/og-maciel/7/425/257/"><i class="fa fa-linkedin-square fa-lg"></i> LinkedIn</a></li>
                <li class="list-group-item"><a href="https://www.goodreads.com/user/show/12048315-og-maciel"><i class="fa fa-goodreads-square fa-lg"></i> GoodReads</a></li>
                <li class="list-group-item"><a href="http://instagram.com/ogmaciel"><i class="fa fa-instagram-square fa-lg"></i> Instagram</a></li>
              </ul>
            </li>



            <li class="list-group-item"><a href="https://omaciel.github.io/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group " id="tags">
                </ul>
            </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Og Maciel
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://omaciel.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://omaciel.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://omaciel.github.io/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'journalofanopensourcee'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->

</body>
</html>